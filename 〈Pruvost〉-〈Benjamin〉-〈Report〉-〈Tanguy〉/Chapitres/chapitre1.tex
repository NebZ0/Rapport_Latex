\chapter{Structure d'un programme}
\lstset{language = C++,basicstyle=\ttfamily,keywordstyle=\color{purple}}
Il est important de respecter la structure du code en C++ afin d’assurer sa lisibilité, sa maintenabilité et son efficacité. Une organisation claire et cohérente du programme facilite son développement et sa compréhension, tant pour le programmeur que pour les membres de l’équipe.

\section{Les Directives de Préprocesseur} 
Un programme en C++ commence généralement par des directives de préprocesseur, qui sont des instructions pré-traitées avant la phase de compilation. Elles permettent d’inclure des bibliothèques et de définir des constantes ou des macros. Ces directives commencent par \emph{le symbole \lstinline|#|}.Voici ci-dessous un exemple:


\lstinputlisting[linerange={1,2}]{Code/base.cpp}

\subsection{Les implémentations de bibliothèques}
Les bibliothèques en C++ jouent un rôle essentiel dans le développement d’applications, car elles offrent des fonctions et des classes pré-définies qui simplifient grandement la gestion des tâches courantes. Une des bibliothèques les plus utilisées est iostream, qui permet la gestion des entrées et sorties, notamment pour la lecture et l'écriture sur la console. L'implémentation de iostream repose sur des flux d'entrée/sortie, tels que std::cin pour l'entrée et std::cout pour la sortie mais pas seulement\footnote{Documentation de iostream:\url{https://cplusplus.com/reference/iostream/}}.

\lstset{frame=single,language = C++,basicstyle=\ttfamily,keywordstyle=\color{purple}}
\lstinputlisting{Code/base.cpp}

Ce code permet d'afficher "Hello World" dans la console, ce qui est impossible sans la bibliothèque iostream

Il y a bien évidemment plein d'autre bibliothèques utiles, comme par exemple \lstinline|<cmaths>|,qui fournit un ensemble de fonctions mathématiques standards pour effectuer des calculs numériques.

Par exemple si nous voulons calculer en C++ $\sqrt{\cos(\frac{1}{3})}$, nous avons maintenant accès aux fonctions \lstinline|sqrt()| et \lstinline|cos()|:

\lstinputlisting{Code/math.cpp}

\subsection{Les Espaces de Noms}

Les espaces de noms (namespaces) permettent de regrouper des éléments tels que des fonctions, des classes et des variables pour éviter les conflits de noms. Le namespace standard (std) est couramment utilisé :

\lstinputlisting[linerange={2,2}]{Code/base_namespace.cpp}

Cette directive permet d'accéder directement aux fonctions et objets de la bibliothèque standard, comme cout ou cin.

\lstinputlisting{Code/base_namespace.cpp}

On remarquera maintenant qu'il n'est plus nécessaire d'écrire \lstinline|std::| devant le cout, qu'il est fastidieux d'écrire quand on appelle ces fonctions un grand nombre de fois.

\subsection{Les macros}

Les macros en C++ sont définies avec \lstinline|#define| et permettent de remplacer des parties du code avant la compilation. Elles sont souvent utilisées pour définir des constantes ou des expressions réutilisables.Exemple:
\lstinline|#define PI 3.14159|

\section{La fonction main()} 

La fonction main est le point d’entrée de tout programme en C++. C’est là que l’exécution commence.Il doit être placer à la fin du code, tout code n'étant pas contenu dedans n'est pas exécuté sauf exception\footnote{Les constructeurs de classes par exemple}. Elle retourne généralement un entier pour indiquer l’état de fin du programme :

\begin{lstlisting}
int main(){
	//Corps du programme
	return 0;
}
\end{lstlisting}

La valeur de retour 0 signale une exécution réussie, tandis qu'une valeur non nulle indique une erreur.

La fonction main peut également accepter des arguments pour traiter les entrées de la ligne de commande :

\begin{lstlisting}
int main(int argc, char* argv[]) {
	// argc : Nombre d'arguments
	// argv : Tableau contenant les arguments
}
\end{lstlisting}
Et dont voici un exemple très simple d'utilisation, il faut d'abord taper la ligne de commande ci dessous en remplacer par les noms correspondant à votre fichier et vos arguments:

\lstinline[language=bash]|./monProgramme arg1 arg2|

\lstinputlisting{Code/main_args.cpp}

\section{Fonctions et commentaires}

Puis finalement pour bien organiser le code, celui-ci va être découper en fonction(détaillées au chapitre \ref{chapFonctions} p.\pageref{chapFonctions})

Mais il faut aussi y insérer des commentaires, notamment pour expliquer les buts des fonctions, mais également pour expliquer des bouts de code qui pourrait être compliqué à comprendre.Cela est nécessaire pour travailler en équipe sur des fichiers de code communs.

\begin{lstlisting}
// Ceci est un commentaire sur une ligne

/*
  Voici un commentaire 
  sur plusieurs lignes differentes !
*/
\end{lstlisting}

Voici finalement à quoi devrait ressembler votre code une fois bien structuré.

\lstinputlisting{Code/structure.cpp}